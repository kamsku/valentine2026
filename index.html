<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Will you be my valentine?</title>

  <script>
    /**
     * ==========================================
     * üíñ CONFIGURATION - CHANGE DATA BELOW üíñ
     * ==========================================
     */
    const CONFIG = {
      valentineName: "Werciu,",                 // Name of your valentine
      questionText: "will you be my valentine?",// The question
      yesButtonText: "Yes",                     // Text on the YES button
      noButtonText: "No",                       // Text on the NO button
      hintText: "‚ÄúNo‚Äù seems a bit shy üòà",      // Hint text at the bottom
      successTitle: "YAY! üéâ",                  // Title shown after clicking YES

      // Tenor GIF ID (from Tenor URL)
      tenorGifId: "13759391442761662032",

      // --- Technical Settings ---
      dodgeDistance: 50, // The larger the value, the earlier the button escapes from the cursor

      // Area where the NO button can move:
      // "buttons" = only the small box with the buttons
      // "card"    = the entire card (larger area without scaling the card)
      escapeArea: "card", // "buttons" or "card"

      // How high the button can escape (when escapeArea = "card"):
      // "full"         = the entire card from the top
      // "belowTitle"   = does not go under the avatar/title
      // "belowButtons" = mostly from the button area downward
      escapeTopMode: "full", // "full", "belowTitle", "belowButtons"
      
      escapePadding: 14,    // Margin from the edge of the escape area
      escapeTopExtra: 10,   // Additional offset from the top area (in px)
      maxTries: 5           // Number of attempts to randomize the position
    };

    /**
     * ==========================================
     * END OF CONFIGURATION - CODE BELOW
     * ==========================================
     */

  </script>

  <style>
    :root {
      --bg-gradient-start: #f7c9d6;
      --bg-gradient-end: #f2b9cd;
      --card-bg: #f6f6f6;
      --text-primary: #1b1b1b;
      --text-muted: #6b6b6b;
      --color-yes: #e84c74;
      --color-yes-hover: #ff5a86;
      --color-no: #d9d9d9;
      --shadow-main: 0 18px 50px rgba(0, 0, 0, 0.15);
      --border-radius: 18px;
      --card-width: min(680px, 92vw);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      font-family: ui-sans-serif, system-ui, -apple-system, sans-serif;
      color: var(--text-primary);
      background:
        radial-gradient(1200px 700px at 30% 15%, rgba(255, 255, 255, 0.35), transparent 60%),
        linear-gradient(180deg, var(--bg-gradient-start), var(--bg-gradient-end));
      overflow: hidden;
    }

    .card {
      width: var(--card-width);
      background: var(--card-bg);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-main);
      padding: 42px 28px 30px;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -1px;
      background-image:
        radial-gradient(circle at 20% 30%, rgba(0, 0, 0, 0.035) 1px, transparent 1px),
        radial-gradient(circle at 70% 60%, rgba(0, 0, 0, 0.03) 1px, transparent 1px);
      background-size: 18px 18px;
      opacity: 0.25;
      pointer-events: none;
      border-radius: var(--border-radius);
    }

    .content {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
      text-align: center;
      z-index: 1;
    }

    .avatar {
      width: 100px;
      height: 100px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    h1, h2 {
      margin: 0;
      font-weight: 800;
      letter-spacing: -0.02em;
    }
    h1 { font-size: clamp(20px, 4vw, 34px); }
    h2 { font-size: clamp(22px, 5vw, 40px); }

    .btn-container {
      width: 100%;
      max-width: 380px;
      height: 100px;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-top: 10px;
    }

    .btn {
      border: none;
      font-weight: 800;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
      user-select: none;
      border-radius: 999px;
      -webkit-tap-highlight-color: transparent;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
    }

    #yesBtn {
      padding: 14px 40px;
      color: white;
      background: linear-gradient(180deg, var(--color-yes-hover), var(--color-yes));
      box-shadow: 0 10px 20px rgba(232, 76, 116, 0.3);
      z-index: 10;
      position: relative;
    }
    #yesBtn:hover {
      transform: scale(1.1);
      box-shadow: 0 14px 28px rgba(232, 76, 116, 0.4);
    }

    #noBtn {
      padding: 12px 30px;
      background: var(--color-no);
      color: #444;
      z-index: 9;
      font-size: 1rem;
      position: relative;
    }

    #noBtn.is-dodging {
      position: absolute;
      padding: 10px 25px;
      font-size: 0.95rem;
      will-change: left, top;
      transition: left 0.12s ease-out, top 0.12s ease-out;
      z-index: 30;
    }

    .hint {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 8px;
    }

    .view-hidden { display: none !important; }

    .meme-container {
      width: min(360px, 80vw);
      aspect-ratio: 1;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(0, 0, 0, 0.05);
      margin: 10px auto;
      background: white;
      display: grid;
      place-items: center;
    }
    .meme-container .tenor-gif-embed { margin: 0 !important; }

    .fade-in {
      animation: fadeIn 0.4s ease forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 480px) {
      .card { padding: 32px 20px; }
      .btn-container { height: 120px; }
    }
  </style>
</head>

<body>
  <svg style="display:none;">
  <symbol id="cat-avatar" viewBox="0 0 120 120">
    <path
      d="M95 22c-6 0-10 4-12 8-2-4-6-8-12-8-8 0-14 6-14 14 0 14 26 28 26 28s26-14 26-28c0-8-6-14-14-14z"
      fill="#e84c74"
      opacity=".95"
    />
    <path
      d="M88 84c16-6 20-26 8-38-6-6-15-5-20 2"
      fill="none"
      stroke="#B65412"
      stroke-width="10"
      stroke-linecap="round"
      stroke-linejoin="round"
      opacity=".95"
    />
    <path
      d="M88 84c16-6 20-26 8-38-6-6-15-5-20 2"
      fill="none"
      stroke="#E67E22"
      stroke-width="6"
      stroke-linecap="round"
      stroke-linejoin="round"
      opacity=".95"
    />
    <ellipse cx="60" cy="86" rx="30" ry="22" fill="#E67E22" />
    <ellipse cx="66" cy="90" rx="16" ry="12" fill="#F3B46A" opacity=".55" />
    <ellipse cx="50" cy="104" rx="10" ry="6.5" fill="#E67E22" />
    <ellipse cx="70" cy="104" rx="10" ry="6.5" fill="#E67E22" />
    <path
      d="M45 104h10M65 104h10"
      stroke="#B65412"
      stroke-width="2.2"
      stroke-linecap="round"
      opacity=".55"
    />
    <circle cx="60" cy="50" r="20" fill="#E67E22" />
    <ellipse cx="60" cy="56" rx="18" ry="13" fill="#F3B46A" opacity=".35" />
    <path d="M46 44 L40 28 L56 36 Z" fill="#E67E22" />
    <path d="M74 44 L80 28 L64 36 Z" fill="#E67E22" />
    <path d="M47 42 L44 32 L53 36 Z" fill="#F0A7B8" opacity=".95" />
    <path d="M73 42 L76 32 L67 36 Z" fill="#F0A7B8" opacity=".95" />
    <circle cx="52" cy="54" r="7.2" fill="#F6E05E" />
    <circle cx="68" cy="54" r="7.2" fill="#F6E05E" />
    <circle cx="52" cy="54" r="3.6" fill="#1b1b1b" />
    <circle cx="68" cy="54" r="3.6" fill="#1b1b1b" />
    <circle cx="60" cy="63" r="2.6" fill="#E26D7A" />
    <path
      d="M56 66c2.2 2 4 2 4 2s1.8 0 4-2"
      fill="none"
      stroke="#4a4a4a"
      stroke-width="2.2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
<g stroke="#4a4a4a" stroke-width="1.1" fill="none" stroke-linecap="round" opacity=".45">
  <path d="M52 62 Q 46 60 42 60" />
  <path d="M52 67 Q 46 68 42 70" />
  <path d="M68 62 Q 74 60 78 60" />
  <path d="M68 67 Q 74 68 78 70" />
</g>
  </symbol>
</svg>

  <main class="card" id="card">
    <section id="askView" class="content">
      <div class="avatar" aria-hidden="true">
        <svg width="100" height="100"><use href="#cat-avatar"></use></svg>
      </div>

      <h1 id="mainTitle"></h1>

      <div class="btn-container" id="interactionArea">
        <button id="yesBtn" class="btn" type="button"></button>
        <button id="noBtn" class="btn" type="button"></button>
      </div>

      <p id="hintLabel" class="hint"></p>
    </section>

    <section id="yayView" class="content view-hidden">
      <div class="avatar" aria-hidden="true">
        <svg width="100" height="100"><use href="#cat-avatar"></use></svg>
      </div>

      <h2 id="successTitle"></h2>
      <div class="meme-container" id="memeBox"></div>
    </section>
  </main>

  <script>
    const ValentineApp = (() => {
      const elements = {
        card: document.getElementById("card"),
        askView: document.getElementById("askView"),
        yayView: document.getElementById("yayView"),
        area: document.getElementById("interactionArea"),
        title: document.getElementById("mainTitle"),
        yesBtn: document.getElementById("yesBtn"),
        noBtn: document.getElementById("noBtn"),
        hintLabel: document.getElementById("hintLabel"),
        successTitle: document.getElementById("successTitle"),
        memeBox: document.getElementById("memeBox")
      };

      let state = {
        isDodgeActive: false,
        placeholder: null,
        tenorLoaded: false
      };

      const init = () => {
        renderUI();
        loadTenor();
        setupEventListeners();
      };

      const renderUI = () => {
        const nameSpan = document.createElement("span");
        nameSpan.textContent = CONFIG.valentineName;
        elements.title.textContent = " ";
        elements.title.prepend(nameSpan);
        elements.title.append(CONFIG.questionText);

        elements.yesBtn.textContent = CONFIG.yesButtonText;
        elements.noBtn.textContent = CONFIG.noButtonText;
        elements.hintLabel.textContent = CONFIG.hintText;
        elements.successTitle.textContent = CONFIG.successTitle;

        elements.memeBox.innerHTML = `
          <div class="tenor-gif-embed"
               data-postid="${CONFIG.tenorGifId}"
               data-share-method="host"
               data-aspect-ratio="1.0"
               data-width="100%"></div>
        `;
      };

      const loadTenor = () => {
        if (state.tenorLoaded) return;
        state.tenorLoaded = true;
        const script = document.createElement("script");
        script.src = "https://tenor.com/embed.js";
        script.async = true;
        document.body.appendChild(script);
      };

      const setupEventListeners = () => {
        elements.yesBtn.addEventListener("click", handleYesClick);

        const triggerDodge = (e) => {
          if (e) e.preventDefault();
          if (!state.isDodgeActive) activateDodgeMode();
          moveNoButton();
        };

        elements.noBtn.addEventListener("mouseenter", triggerDodge);
        elements.noBtn.addEventListener("click", triggerDodge);
        elements.noBtn.addEventListener("touchstart", triggerDodge, { passive: false });

        window.addEventListener("mousemove", (e) => {
          if (!state.isDodgeActive) return;

          const rect = elements.noBtn.getBoundingClientRect();
          const centerX = rect.left + rect.width / 2;
          const centerY = rect.top + rect.height / 2;
          const distance = Math.hypot(e.clientX - centerX, e.clientY - centerY);

          if (distance < CONFIG.dodgeDistance) {
            moveNoButton();
          }
        });
      };

      const handleYesClick = () => {
        elements.askView.classList.add("view-hidden");
        elements.yayView.classList.remove("view-hidden");
        elements.yayView.classList.add("fade-in");
      };

      const activateDodgeMode = () => {
        state.isDodgeActive = true;

        const noRect = elements.noBtn.getBoundingClientRect();
        if (!state.placeholder) {
          state.placeholder = document.createElement("div");
          state.placeholder.style.width = `${noRect.width}px`;
          state.placeholder.style.height = `${noRect.height}px`;
          state.placeholder.style.flex = "0 0 auto";
          elements.area.insertBefore(state.placeholder, elements.noBtn);
        }

        elements.askView.appendChild(elements.noBtn);
        elements.noBtn.classList.add("is-dodging");

        const cardRect = elements.card.getBoundingClientRect();
        elements.noBtn.style.left = `${noRect.left - cardRect.left}px`;
        elements.noBtn.style.top = `${noRect.top - cardRect.top}px`;
      };

      const getEscapeBounds = () => {
        const cardRect = elements.card.getBoundingClientRect();
        const pad = CONFIG.escapePadding;

        if (CONFIG.escapeArea === "buttons") {
          const areaRect = elements.area.getBoundingClientRect();
          return {
            minX: (areaRect.left - cardRect.left) + pad,
            maxX: (areaRect.right - cardRect.left) - pad,
            minY: (areaRect.top - cardRect.top) + pad,
            maxY: (areaRect.bottom - cardRect.top) - pad
          };
        }

        let minY = pad;
        if (CONFIG.escapeTopMode === "belowTitle") {
          const titleRect = elements.title.getBoundingClientRect();
          minY = (titleRect.bottom - cardRect.top) + CONFIG.escapeTopExtra;
        } else if (CONFIG.escapeTopMode === "belowButtons") {
          const areaRect = elements.area.getBoundingClientRect();
          minY = (areaRect.top - cardRect.top) - CONFIG.escapeTopExtra;
        }

        return {
          minX: pad,
          maxX: cardRect.width - pad,
          minY: minY,
          maxY: cardRect.height - pad
        };
      };

      const moveNoButton = () => {
        const cardRect = elements.card.getBoundingClientRect();
        const yesRect = elements.yesBtn.getBoundingClientRect();
        const btnW = elements.noBtn.offsetWidth;
        const btnH = elements.noBtn.offsetHeight;
        const bounds = getEscapeBounds();

        const minX = Math.max(bounds.minX, 0);
        const maxX = Math.max(minX, bounds.maxX - btnW);
        const minY = Math.max(bounds.minY, 0);
        const maxY = Math.max(minY, bounds.maxY - btnH);

        let x, y, tries = 0;

        do {
          x = minX + Math.random() * (maxX - minX);
          y = minY + Math.random() * (maxY - minY);
          tries++;
        } while (checkOverlap(x, y, btnW, btnH, yesRect, cardRect) && tries < CONFIG.maxTries);

        elements.noBtn.style.left = `${x}px`;
        elements.noBtn.style.top = `${y}px`;
      };

      const checkOverlap = (x, y, w, h, yesRect, cardRect) => {
        const yesL = (yesRect.left - cardRect.left) - 22;
        const yesT = (yesRect.top - cardRect.top) - 22;
        const yesR = yesL + yesRect.width + 44;
        const yesB = yesT + yesRect.height + 44;

        return !(x + w < yesL || x > yesR || y + h < yesT || y > yesB);
      };

      return { init };
    })();

    document.addEventListener("DOMContentLoaded", ValentineApp.init);
  </script>
</body>
</html>